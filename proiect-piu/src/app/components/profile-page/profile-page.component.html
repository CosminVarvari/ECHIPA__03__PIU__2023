<div style="background: #f8aaff;background: -webkit-linear-gradient(to right, #8dfff4, #f8aaff);background: linear-gradient(to right, #8dfff4, #f8aaff);">
  <app-header *ngIf="!this.showJourney"></app-header>
  <div *ngIf="this.showJourney">
    <app-create-journey (emitOnSuccess)="hideCreateJourney()" [navigateAfterCreate]="false"></app-create-journey>
  </div>
  <mat-card class="profile-card">
    <mat-card-title class="profile-card__title">User Profile</mat-card-title>
    <mat-card-content class="profile-card__content">
      <form [formGroup]="profileForm" (submit)="submit()">
        <!-- Name Field -->
        <mat-form-field appearance="fill" style="margin: 5px;">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter your name">
          <mat-error *ngIf="profileForm.controls['name'].invalid && profileForm.controls['name'].touched">
            Name is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" style="margin: 5px;">
          <mat-label> Date of Birth </mat-label>
          <input matInput formControlName="dob" [matDatepicker]="picker">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill" style="margin: 5px;">
          <mat-label> Profession </mat-label>
          <input matInput formControlName="profession">
          <mat-error *ngIf="profileForm.controls['profession'].invalid && profileForm.controls['profession'].touched">
            Profession is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" style="margin: 5px;">
          <mat-label> Address </mat-label>
          <input matInput formControlName="address">
          <mat-error *ngIf="profileForm.controls['address'].invalid && profileForm.controls['address'].touched">
            Address is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" style="margin: 5px;">
          <mat-label> City </mat-label>
          <input matInput formControlName="city">
          <mat-error *ngIf="profileForm.controls['city'].invalid && profileForm.controls['city'].touched">
            City is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" style="margin: 5px;">
          <mat-label> Country </mat-label>
          <input matInput formControlName="country">
          <mat-error *ngIf="profileForm.controls['country'].invalid && profileForm.controls['country'].touched">
            Country is required
          </mat-error>
        </mat-form-field>

        <div style="display: flex; justify-content: space-between;">
          <button mat-raised-button color="primary" [disabled]="profileForm.invalid" type="submit">
            Update Profile
          </button>
          <button mat-raised-button color="primary" [disabled]="profileForm.invalid" (click)="showCreateJourney()">
            Add a journey
          </button>

        </div>
      </form>
    </mat-card-content>

    <mat-card-content *ngIf="this.user.pastTravels.length > 0" style="margin-top: 30px;">
      <h2> Past Travels </h2>
      <mat-selection-list #pastTravels [multiple]="false" *ngFor="let travel of this.user.pastTravels">
        <mat-list-option style="height: auto;" [value]="travel.destination.name">
          <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin-left: 15px; margin-right: 15px;">
            <div style="margin: 3px;">
              <h3 style="background-color: bisque;"> Accomodation </h3>
              <p style="background-color: beige;"> Name {{travel.accomodation.name}}</p>
              <p> City {{travel.accomodation.city}}</p>
              <p> Price ${{travel.accomodation.price}}</p>
              <p> Rating: {{travel.accomodation.stars}} stars </p>
            </div>
            <div>
              <h3 style="background-color: bisque;"> Destination </h3>
              <p style="background-color: beige;"> Name: {{travel.destination.name}}</p>
              <p> Temperature: {{travel.destination.temperature}}</p>
              <p> Weather: {{travel.destination.weather}}</p>
            </div>
          </div>
          <div *ngIf="pastTravels.selectedOptions.hasValue()" style="display: flex;align-items: center; justify-content: space-evenly;">
            <mat-form-field [style.fontSize]="16">
              <textarea matInput
              [(ngModel)]="travel.feedback"
                        cdkTextareaAutosize
                        #autosize="cdkTextareaAutosize"
                        cdkAutosizeMinRows="1"
                        cdkAutosizeMaxRows="5"> {{travel.feedback !== '' ? travel.feedback : 'No feedback exists for this travel'}} </textarea>
                      </mat-form-field>
                      <button mat-raised-button color="primary" [disabled]="travel.feedback === ''" (click)="updateFeedback(travel)"> Leave a feedback</button>
          </div>
        </mat-list-option>
      </mat-selection-list>
    </mat-card-content>

    <mat-card-content *ngIf="this.user.pastTravels.length <= 0" style="margin-top: 30px;">
      <h1> You have no past travels </h1>
    </mat-card-content>

    <mat-card-content *ngIf="this.user.futureTravels.length > 0" style="margin-top: 30px;">
      <h2> Future Travels </h2>
      <mat-list *ngFor="let travel of this.user.futureTravels">
        <mat-list-item style="height: auto;">
          <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin-left: 15px; margin-right: 15px;">
            <div style="margin: 3px;">
              <h3 style="background-color: bisque;"> Accomodation </h3>
              <p style="background-color: beige;"> Name {{travel.accomodation.name}}</p>
              <p> City {{travel.accomodation.city}}</p>
              <p> Price ${{travel.accomodation.price}}</p>
              <p> Rating: {{travel.accomodation.stars}} stars </p>
            </div>
            <div>
              <h3 style="background-color: bisque;"> Destination </h3>
              <p style="background-color: beige;"> Name: {{travel.destination.name}}</p>
              <p> Temperature: {{travel.destination.temperature}}</p>
              <p> Weather: {{travel.destination.weather}}</p>
            </div>
          </div>
        </mat-list-item>
      </mat-list>
    </mat-card-content>

    <mat-card-content *ngIf="this.user.pastTravels.length <= 0" style="margin-top: 30px;">
      <h1> You have no future travels </h1>
    </mat-card-content>
  </mat-card>
</div>

